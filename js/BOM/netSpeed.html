<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>网速检测</title>
</head>
<body>
<p>只是比较粗略地获取服务器的响应速度，要完整地测速还得考虑HTTP状态、网站解析时间、服务器连接时间等等</p>
<script>var st = new Date();</script>

<img src="../../image/2.jpg" onload='showspeed()' style="display: none">
<div id='showtxt'></div>

<script>
function showspeed(){  
    var filesize = 908*1024;    //measured in KB   
    var et = new Date();  
    // var speed = Math.round(filesize*1000)/(et - st); 
    var speed = Math.round(filesize/(et - st)/1000);
    var scope=(speed>0 && speed<=50)?0:(speed>50 && speed<=100)?1:(speed>=100 && speed<200)?2:(speed>=200 && speed<300)?3:4;
    var arr=["网速低于50KB","网速在50-100KB之间","网速在100-200KB之间","网速在200-300KB之间","网速高于300KB"];
    document.getElementById("showtxt").innerHTML = `
    0.${arr[0]}<br/>
    1.${arr[1]}<br/>
    2.${arr[2]}<br/>
    3.${arr[3]}<br/>
    4.${arr[4]}<br/><br/>
    下载速度为：${speed}(b/s) ${arr[scope]},等级为：${scope}
    `;  
}
</script>

</body>
</html>