<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>canvas 全局阴影和透明</title>
<style>

</style>
</head>

<body>
<p>canvas 全局阴影:创建一个向右下方位移各5px的红色阴影，模糊2px</p>

<canvas id="drawing" style="border:1px solid black">
    <p>The canvas element is not supported!</p>
</canvas>

<script src="../../vendors/jquery-3.1.1.js"></script>
<script>
var drawing = document.getElementById('drawing');
//确定浏览器支持<canvas>元素
if(drawing.getContext){
    var context = drawing.getContext('2d');
    context.shadowColor = "red";   
    context.shadowOffsetX = 5;  
    context.shadowOffsetY = 5;
    context.shadowBlur = 2;   
    context.globalAlpha = 0.9; 
    context.fillStyle = "lightblue";
    context.fillRect(10, 10, 200, 100);
    context.globalAlpha = 1;

    context.shadowColor = "rgba(0,0,0,.5)";   
    context.shadowOffsetX = 5;  
    context.shadowOffsetY = 5;
    context.shadowBlur = 2;
    var fontsize = 30;
    var str = "canvas 全局阴影";
    context.font = fontsize + "px 微软雅黑";
    context.textAlign = "start";
    context.textBaseline = "middle";
    console.log(context.measureText(str).width);
    while(context.measureText(str).width > 180){
        fontsize--;
        context.font = fontsize + "px  微软雅黑";
    }
    console.log(context.measureText(str).width);
    console.log(fontsize);    
    context.fillStyle = "rgba(0,0,0,1)";
    context.fillText(str, 20, 60);
} 
</script>
</body>
</html>